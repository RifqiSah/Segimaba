(function(d){function c(J,K,G,I,L){function D(){C.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd");K&&b(K,G,I,L);L.startOrder=[];L.newOrder=[];L.origSort=[];L.checkSort=[];x.removeStyle(L.prefix+"filter, filter, "+L.prefix+"transform, transform, opacity, display").css(L.clean).removeAttr("data-checksum");window.atob||x.css({display:"none",opacity:"0"});C.removeStyle(L.prefix+"transition, transition, "+L.prefix+"perspective, perspective, "+L.prefix+"perspective-origin, perspective-origin, "+(L.resizeContainer?"height":""));"list"==L.layoutMode?(A.css({display:L.targetDisplayList,opacity:"1"}),L.origDisplay=L.targetDisplayList):(A.css({display:L.targetDisplayGrid,opacity:"1"}),L.origDisplay=L.targetDisplayGrid);L.origLayout=L.layoutMode;setTimeout(function(){x.removeStyle(L.prefix+"transition, transition");L.mixing=!1;if("function"==typeof L.onMixEnd){var g=L.onMixEnd.call(this,L);L=g?g:L}})}clearInterval(L.failsafe);L.mixing=!0;L.filter=J;if("function"==typeof L.onMixStart){var H=L.onMixStart.call(this,L);L=H?H:L}for(var F=L.transitionSpeed,H=0;2>H;H++){var E=0==H?E=L.prefix:"";L.transition[E+"transition"]="all "+F+"ms linear";L.transition[E+"transform"]=E+"translate3d(0,0,0)";L.perspective[E+"perspective"]=L.perspectiveDistance+"px";L.perspective[E+"perspective-origin"]=L.perspectiveOrigin}var w=L.targetSelector,x=I.find(w);x.each(function(){this.data={}});var C=x.parent();C.css(L.perspective);L.easingFallback="ease-in-out";"smooth"==L.easing&&(L.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)");"snap"==L.easing&&(L.easing="cubic-bezier(0.77, 0, 0.175, 1)");"windback"==L.easing&&(L.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",L.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)");"windup"==L.easing&&(L.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",L.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)");H="list"==L.layoutMode&&null!=L.listEffects?L.listEffects:L.effects;Array.prototype.indexOf&&(L.fade=-1<H.indexOf("fade")?"0":"",L.scale=-1<H.indexOf("scale")?"scale(.01)":"",L.rotateZ=-1<H.indexOf("rotateZ")?"rotate(180deg)":"",L.rotateY=-1<H.indexOf("rotateY")?"rotateY(90deg)":"",L.rotateX=-1<H.indexOf("rotateX")?"rotateX(90deg)":"",L.blur=-1<H.indexOf("blur")?"blur(8px)":"",L.grayscale=-1<H.indexOf("grayscale")?"grayscale(100%)":"");var A=d(),o=d(),i=[],y=!1;"string"===typeof J?i=f(J):(y=!0,d.each(J,function(g){i[g]=f(this)}));"or"==L.filterLogic?(""==i[0]&&i.shift(),1>i.length?o=o.add(I.find(w+":visible")):x.each(function(){var h=d(this);if(y){var g=0;d.each(i,function(){this.length?h.is("."+this.join(", ."))&&g++:0<g&&g++});g==i.length?A=A.add(h):o=o.add(h)}else{h.is("."+i.join(", ."))?A=A.add(h):o=o.add(h)}})):(A=A.add(C.find(w+"."+i.join("."))),o=o.add(C.find(w+":not(."+i.join(".")+"):visible")));J=A.length;var e=d(),z=d(),B=d();o.each(function(){var g=d(this);"none"!=g.css("display")&&(e=e.add(g),B=B.add(g))});if(A.filter(":visible").length==J&&!e.length&&!K){if(L.origLayout==L.layoutMode){return D(),!1}if(1==A.length){return"list"==L.layoutMode?(I.addClass(L.listClass),I.removeClass(L.gridClass),B.css("display",L.targetDisplayList)):(I.addClass(L.gridClass),I.removeClass(L.listClass),B.css("display",L.targetDisplayGrid)),D(),!1}}L.origHeight=C.height();if(A.length){I.removeClass(L.failClass);A.each(function(){var g=d(this);"none"==g.css("display")?z=z.add(g):B=B.add(g)});if(L.origLayout!=L.layoutMode&&!1==L.animateGridList){return"list"==L.layoutMode?(I.addClass(L.listClass),I.removeClass(L.gridClass),B.css("display",L.targetDisplayList)):(I.addClass(L.gridClass),I.removeClass(L.listClass),B.css("display",L.targetDisplayGrid)),D(),!1}if(!window.atob){return D(),!1}x.css(L.clean);B.each(function(){this.data.origPos=d(this).offset()});"list"==L.layoutMode?(I.addClass(L.listClass),I.removeClass(L.gridClass),z.css("display",L.targetDisplayList)):(I.addClass(L.gridClass),I.removeClass(L.listClass),z.css("display",L.targetDisplayGrid));z.each(function(){this.data.showInterPos=d(this).offset()});e.each(function(){this.data.hideInterPos=d(this).offset()});B.each(function(){this.data.preInterPos=d(this).offset()});"list"==L.layoutMode?B.css("display",L.targetDisplayList):B.css("display",L.targetDisplayGrid);K&&b(K,G,I,L);if(J=K){L:if(J=L.origSort,H=L.checkSort,J.length!=H.length){J=!1}else{for(E=0;E<H.length;E++){if(J[E].compare&&!J[E].compare(H[E])||J[E]!==H[E]){J=!1;break L}}J=!0}}if(J){return D(),!1}e.hide();z.each(function(){this.data.finalPos=d(this).offset()});B.each(function(){this.data.finalPrePos=d(this).offset()});L.newHeight=C.height();K&&b("reset",null,I,L);z.hide();B.css("display",L.origDisplay);"block"==L.origDisplay?(I.addClass(L.listClass),z.css("display",L.targetDisplayList)):(I.removeClass(L.listClass),z.css("display",L.targetDisplayGrid));L.resizeContainer&&C.css("height",L.origHeight+"px");J={};for(H=0;2>H;H++){E=0==H?E=L.prefix:"",J[E+"transform"]=L.scale+" "+L.rotateX+" "+L.rotateY+" "+L.rotateZ,J[E+"filter"]=L.blur+" "+L.grayscale}z.css(J);B.each(function(){var g=this.data,m=d(this);m.hasClass("mix_tohide")?(g.preTX=g.origPos.left-g.hideInterPos.left,g.preTY=g.origPos.top-g.hideInterPos.top):(g.preTX=g.origPos.left-g.preInterPos.left,g.preTY=g.origPos.top-g.preInterPos.top);for(var l={},k=0;2>k;k++){var h=0==k?h=L.prefix:"";l[h+"transform"]="translate("+g.preTX+"px,"+g.preTY+"px)"}m.css(l)});"list"==L.layoutMode?(I.addClass(L.listClass),I.removeClass(L.gridClass)):(I.addClass(L.gridClass),I.removeClass(L.listClass));setTimeout(function(){if(L.resizeContainer){for(var g={},j=0;2>j;j++){var h=0==j?h=L.prefix:"";g[h+"transition"]="all "+F+"ms ease-in-out";g.height=L.newHeight+"px"}C.css(g)}e.css("opacity",L.fade);z.css("opacity",1);z.each(function(){var k=this.data;k.tX=k.finalPos.left-k.showInterPos.left;k.tY=k.finalPos.top-k.showInterPos.top;for(var n={},m=0;2>m;m++){var l=0==m?l=L.prefix:"";n[l+"transition-property"]=l+"transform, "+l+"filter, opacity";n[l+"transition-timing-function"]=L.easing+", linear, linear";n[l+"transition-duration"]=F+"ms";n[l+"transition-delay"]="0";n[l+"transform"]="translate("+k.tX+"px,"+k.tY+"px)";n[l+"filter"]="none"}d(this).css("-webkit-transition","all "+F+"ms "+L.easingFallback).css(n)});B.each(function(){var k=this.data;k.tX=0!=k.finalPrePos.left?k.finalPrePos.left-k.preInterPos.left:0;k.tY=0!=k.finalPrePos.left?k.finalPrePos.top-k.preInterPos.top:0;for(var n={},m=0;2>m;m++){var l=0==m?l=L.prefix:"";n[l+"transition"]="all "+F+"ms "+L.easing;n[l+"transform"]="translate("+k.tX+"px,"+k.tY+"px)"}d(this).css("-webkit-transition","all "+F+"ms "+L.easingFallback).css(n)});g={};for(j=0;2>j;j++){h=0==j?h=L.prefix:"",g[h+"transition"]="all "+F+"ms "+L.easing+", "+h+"filter "+F+"ms linear, opacity "+F+"ms linear",g[h+"transform"]=L.scale+" "+L.rotateX+" "+L.rotateY+" "+L.rotateZ,g[h+"filter"]=L.blur+" "+L.grayscale,g.opacity=L.fade}e.css(g);C.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(k){if(-1<k.originalEvent.propertyName.indexOf("transform")||-1<k.originalEvent.propertyName.indexOf("opacity")){-1<w.indexOf(".")?d(k.target).hasClass(w.replace(".",""))&&D():d(k.target).is(w)&&D()}})},10);L.failsafe=setTimeout(function(){L.mixing&&D()},F+400)}else{L.resizeContainer&&C.css("height",L.origHeight+"px");if(!window.atob){return D(),!1}e=o;setTimeout(function(){C.css(L.perspective);if(L.resizeContainer){for(var g={},j=0;2>j;j++){var h=0==j?h=L.prefix:"";g[h+"transition"]="height "+F+"ms ease-in-out";g.height=L.minHeight+"px"}C.css(g)}x.css(L.transition);if(o.length){g={};for(j=0;2>j;j++){h=0==j?h=L.prefix:"",g[h+"transform"]=L.scale+" "+L.rotateX+" "+L.rotateY+" "+L.rotateZ,g[h+"filter"]=L.blur+" "+L.grayscale,g.opacity=L.fade}e.css(g);C.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(k){if(-1<k.originalEvent.propertyName.indexOf("transform")||-1<k.originalEvent.propertyName.indexOf("opacity")){I.addClass(L.failClass),D()}})}else{L.mixing=!1}},10)}}function b(u,v,p,t){function w(g,h){var k=isNaN(1*g.attr(u))?g.attr(u).toLowerCase():1*g.attr(u),j=isNaN(1*h.attr(u))?h.attr(u).toLowerCase():1*h.attr(u);return k<j?-1:k>j?1:0}function m(g){"asc"==v?q.prepend(g).prepend(" "):q.append(g).append(" ")}p.find(t.targetSelector).wrapAll('<div class="mix_sorter"/>');var q=p.find(".mix_sorter");t.origSort.length||q.find(t.targetSelector+":visible").each(function(){d(this).wrap("<s/>");t.origSort.push(d(this).parent().html().replace(/\s+/g,""));d(this).unwrap()});q.empty();if("reset"==u){d.each(t.startOrder,function(){q.append(this).append(" ")})}else{if("default"==u){d.each(t.origOrder,function(){m(this)})}else{if("random"==u){if(!t.newOrder.length){for(var o=t.startOrder.slice(),n=o.length,x=n;x--;){var e=parseInt(Math.random()*n),i=o[x];o[x]=o[e];o[e]=i}t.newOrder=o}d.each(t.newOrder,function(){q.append(this).append(" ")})}else{if("custom"==u){d.each(v,function(){m(this)})}else{if("undefined"===typeof t.origOrder[0].attr(u)){return console.log("No such attribute found. Terminating"),!1}t.newOrder.length||(d.each(t.origOrder,function(){t.newOrder.push(d(this))}),t.newOrder.sort(w));d.each(t.newOrder,function(){m(this)})}}}}t.checkSort=[];q.find(t.targetSelector+":visible").each(function(g){var h=d(this);0==g&&h.attr("data-checksum","1");h.wrap("<s/>");t.checkSort.push(h.parent().html().replace(/\s+/g,""));h.unwrap()});p.find(t.targetSelector).unwrap()}function f(g){g=g.replace(/\s{2,}/g," ");var e=g.split(" ");d.each(e,function(h){"all"==this&&(e[h]="mix_all")});""==e[0]&&e.shift();return e}var a={init:function(e){return this.each(function(){var i={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onMixLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};e&&d.extend(i,e);this.config=i;d.support.touch="ontouchend" in document;d.support.touch&&(i.isTouch=!0,i.resetDelay=350);i.container=d(this);var n=i.container,p;j:{p=n[0];for(var j=["Webkit","Moz","O","ms"],l=0;l<j.length;l++){if(j[l]+"Transition" in p.style){p=j[l];break j}}p="transition" in p.style?"":!1}i.prefix=p;i.prefix=i.prefix?"-"+i.prefix.toLowerCase()+"-":"";n.find(i.targetSelector).each(function(){i.origOrder.push(d(this))});if(i.sortOnLoad){var o;d.isArray(i.sortOnLoad)?(p=i.sortOnLoad[0],o=i.sortOnLoad[1],d(i.sortSelector+"[data-sort="+i.sortOnLoad[0]+"][data-order="+i.sortOnLoad[1]+"]").addClass("active")):(d(i.sortSelector+"[data-sort="+i.sortOnLoad+"]").addClass("active"),p=i.sortOnLoad,i.sortOnLoad="desc");b(p,o,n,i)}for(o=0;2>o;o++){p=0==o?p=i.prefix:"",i.transition[p+"transition"]="all "+i.transitionSpeed+"ms ease-in-out",i.perspective[p+"perspective"]=i.perspectiveDistance+"px",i.perspective[p+"perspective-origin"]=i.perspectiveOrigin}for(o=0;2>o;o++){p=0==o?p=i.prefix:"",i.clean[p+"transition"]="none"}"list"==i.layoutMode?(n.addClass(i.listClass),i.origDisplay=i.targetDisplayList):(n.addClass(i.gridClass),i.origDisplay=i.targetDisplayGrid);i.origLayout=i.layoutMode;o=i.showOnLoad.split(" ");d.each(o,function(){d(i.filterSelector+'[data-filter="'+this+'"]').addClass("active")});n.find(i.targetSelector).addClass("mix_all");"all"==o[0]&&(o[0]="mix_all",i.showOnLoad="mix_all");var m=d();d.each(o,function(){m=m.add(d("."+this))});m.each(function(){var g=d(this);"list"==i.layoutMode?g.css("display",i.targetDisplayList):g.css("display",i.targetDisplayGrid);g.css(i.transition)});setTimeout(function(){i.mixing=!0;m.css("opacity","1");setTimeout(function(){"list"==i.layoutMode?m.removeStyle(i.prefix+"transition, transition").css({display:i.targetDisplayList,opacity:1}):m.removeStyle(i.prefix+"transition, transition").css({display:i.targetDisplayGrid,opacity:1});i.mixing=!1;if("function"==typeof i.onMixLoad){var g=i.onMixLoad.call(this,i);i=g?g:i}},i.transitionSpeed)},10);i.filter=i.showOnLoad;d(i.sortSelector).bind(i.buttonEvent,function(){if(!i.mixing){var g=d(this),k=g.attr("data-sort"),h=g.attr("data-order");if(g.hasClass("active")){if("random"!=k){return !1}}else{d(i.sortSelector).removeClass("active"),g.addClass("active")}n.find(i.targetSelector).each(function(){i.startOrder.push(d(this))});c(i.filter,k,h,n,i)}});d(i.filterSelector).bind(i.buttonEvent,function(){if(!i.mixing){var g=d(this);if(!1==i.multiFilter){d(i.filterSelector).removeClass("active"),g.addClass("active"),i.filter=g.attr("data-filter"),d(i.filterSelector+'[data-filter="'+i.filter+'"]').addClass("active")}else{var h=g.attr("data-filter");g.hasClass("active")?(g.removeClass("active"),i.filter=i.filter.replace(RegExp("(\\s|^)"+h),"")):(g.addClass("active"),i.filter=i.filter+" "+h)}c(i.filter,null,null,n,i)}})})},toGrid:function(){return this.each(function(){var e=this.config;"grid"!=e.layoutMode&&(e.layoutMode="grid",c(e.filter,null,null,d(this),e))})},toList:function(){return this.each(function(){var e=this.config;"list"!=e.layoutMode&&(e.layoutMode="list",c(e.filter,null,null,d(this),e))})},filter:function(e){return this.each(function(){var g=this.config;g.mixing||(d(g.filterSelector).removeClass("active"),d(g.filterSelector+'[data-filter="'+e+'"]').addClass("active"),c(e,null,null,d(this),g))})},sort:function(e){return this.each(function(){var h=this.config,j=d(this);if(!h.mixing){d(h.sortSelector).removeClass("active");if(d.isArray(e)){var k=e[0],i=e[1];d(h.sortSelector+'[data-sort="'+e[0]+'"][data-order="'+e[1]+'"]').addClass("active")}else{d(h.sortSelector+'[data-sort="'+e+'"]').addClass("active"),k=e,i="desc"}j.find(h.targetSelector).each(function(){h.startOrder.push(d(this))});c(h.filter,k,i,j,h)}})},multimix:function(e){return this.each(function(){var h=this.config,i=d(this);multiOut={filter:h.filter,sort:null,order:"desc",layoutMode:h.layoutMode};d.extend(multiOut,e);h.mixing||(d(h.filterSelector).add(h.sortSelector).removeClass("active"),d(h.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),"undefined"!==typeof multiOut.sort&&(d(h.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),i.find(h.targetSelector).each(function(){h.startOrder.push(d(this))})),h.layoutMode=multiOut.layoutMode,c(multiOut.filter,multiOut.sort,multiOut.order,i,h))})},remix:function(e){return this.each(function(){var h=this.config,i=d(this);h.origOrder=[];i.find(h.targetSelector).each(function(){var g=d(this);g.addClass("mix_all");h.origOrder.push(g)});!h.mixing&&"undefined"!==typeof e&&(d(h.filterSelector).removeClass("active"),d(h.filterSelector+'[data-filter="'+e+'"]').addClass("active"),c(e,null,null,i,h))})}};d.fn.mixitup=function(g,e){if(a[g]){return a[g].apply(this,Array.prototype.slice.call(arguments,1))}if("object"===typeof g||!g){return a.init.apply(this,arguments)}};d.fn.removeStyle=function(e){return this.each(function(){var h=d(this);e=e.replace(/\s+/g,"");var i=e.split(",");d.each(i,function(){var g=RegExp(this.toString()+"[^;]+;?","g");h.attr("style",function(k,j){if(j){return j.replace(g,"")}})})})}})(jQuery);